<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BucÄƒtarul Personal â€” App Premium</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --verde:#0e5a43; --verde-2:#0a4a35; --ivory:#f7faf8; --line:#e6ede9;
  --ink:#121815; --muted:#5f6a66; --gold:#c9a646;
  --rad:16px; --shadow:0 20px 60px rgba(0,0,0,.12);
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:#fff}
.container{width:min(1200px,92%);margin-inline:auto}

.site-header{position:sticky;top:0;z-index:60;background:#fff;border-bottom:1px solid var(--line)}
.site-header .container{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:46px;height:46px;border-radius:50%;display:grid;place-items:center;font-weight:800;color:#fff;
  background:conic-gradient(from 200deg,var(--gold),#e9d59a,var(--gold));box-shadow:var(--shadow)}
.brand-text h1{font:800 22px/1 Playfair Display,serif;margin:0}
.brand-text p{margin:3px 0 0;color:var(--muted);font-size:12px}
.nav{display:flex;align-items:center;gap:10px}
.nav a,.nav button{background:transparent;border:0;padding:10px 12px;border-radius:10px;color:var(--ink);text-decoration:none;cursor:pointer}
.nav a.active{color:var(--verde)}
.button{background:var(--verde);color:#fff !important;padding:12px 18px;border-radius:14px;border:0;cursor:pointer}
.button.ghost{background:transparent;color:var(--verde) !important;border:1px solid var(--verde)}
.button.sm{padding:8px 12px;border-radius:10px}
.nav-toggle{display:none;background:transparent;border:0;font-size:26px}

.hero{
  position:relative; isolation:isolate; color:#fff;
  background:#0d1c16;
}
.hero::before{
  content:""; position:absolute; inset:0; z-index:-2;
  background:url('https://images.unsplash.com/photo-1526318472351-c75fcf070305?auto=format&fit=crop&w=1600&q=70') center/cover no-repeat;
  filter:saturate(1.1) brightness(.72);
}
.hero::after{
  content:""; position:absolute; inset:0; z-index:-1;
  background:linear-gradient(180deg, rgba(0,0,0,.20), rgba(0,0,0,.55));
}
.hero-wrap{display:grid;grid-template-columns:1.1fr .9fr;gap:28px;align-items:center;min-height:66vh;padding:42px 0}
.hero h2{font:800 clamp(32px,5.0vw,64px)/1.06 Playfair Display,serif;margin:0 0 12px}
.hero p{font-size:clamp(14px,1.6vw,18px);opacity:.95;margin:0 0 16px}
.hero .cta{display:flex;gap:10px;flex-wrap:wrap}
.card{background:#ffffff; border:1px solid var(--line); border-radius:var(--rad); padding:16px; box-shadow:var(--shadow); color:var(--ink)}
.card h3{margin:0 0 12px}

.form label{display:grid;gap:6px;margin:8px 0;color:var(--ink)}
input,select,textarea{padding:12px 12px;border-radius:12px;border:1px solid var(--line);background:#fff}
input:focus,select:focus,textarea:focus{outline:2px solid #e2efe8;border-color:#c6e1d6}
.muted{color:var(--muted)}
.badge{display:inline-block;padding:6px 10px;border-radius:999px;background:var(--verde-2);color:#fff;font-size:12px}

.section{padding:42px 0}
.section h3{font:800 28px/1.15 Playfair Display,serif;margin:0 0 16px}
.section .lead{color:var(--muted);margin-top:-4px}

/* HOW IT WORKS */
.steps{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(220px,1fr));
  gap:20px;
  padding:10px 0;
}
.step{
  background:#ffffffee; /* uÈ™or alb translucid dar solid */
  border:1px solid var(--line);
  border-radius:20px;
  padding:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.06);
  text-align:center;
  transition:transform .2s ease, box-shadow .2s ease;
}
.step:hover{
  transform:translateY(-4px);
  box-shadow:0 14px 35px rgba(0,0,0,.12);
}
.step .icon{
  font-size:34px;
  margin-bottom:10px;
}
.step strong{
  display:block;
  font:700 18px/1.2 Inter, sans-serif;
  color:var(--ink);
  margin-bottom:4px;
}
.step span{
  color:var(--muted);
  font-size:15px;
}
/* GALLERY (scroll-snap) */
.gallery{display:grid;gap:8px}
.scroller{display:grid;grid-auto-flow:column;grid-auto-columns:80%;gap:12px;overflow:auto;scroll-snap-type:x mandatory;padding-bottom:6px}
.scroller::-webkit-scrollbar{height:10px}
.scroller::-webkit-scrollbar-thumb{background:#d9e5df;border-radius:20px}
.snap{scroll-snap-align:center;position:relative;height:260px;border-radius:16px;overflow:hidden}
.snap img{width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.05)}
.snap .cap{position:absolute;left:12px;bottom:12px;background:rgba(0,0,0,.5);color:#fff;padding:8px 10px;border-radius:10px;font-size:13px}

/* CHEFS */
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
.chef{overflow:hidden;padding:0}
.chef .pic{height:180px;border-radius:14px;overflow:hidden}
.chef .pic img{width:100%;height:100%;object-fit:cover;display:block}
.chef .meta{padding:12px}
.chef .city{color:var(--muted);font-size:13px}
.stars{color:#f5b400}

/* TESTIMONIALS */
.testis{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
.quote{background:#fff;border:1px solid var(--line);border-radius:14px;padding:16px}
.quote .stars{margin-bottom:6px}

/* DASHBOARD AREA */
/* Cardurile mari */
.stack-md .card {
  border-radius: 20px;
  box-shadow: 0 14px 35px rgba(0,0,0,.06);
}

/* Meniul lateral: spaÈ›iere mai bunÄƒ */
.side-nav button {
  padding: 14px 16px;
  font-size: 16px;
}

/* Lista de comenzi */
#ordersList .item {
  border-radius: 18px;
  box-shadow: 0 6px 20px rgba(0,0,0,.05);
  padding: 18px;
}

/* Badge status â€nouâ€ */
.badge {
  background: var(--verde);
  color: #fff;
  padding: 6px 14px;
  border-radius: 30px;
  font-size: 13px;
  font-weight: 600;
  letter-spacing: .2px;
}

/* FOOTER */
.site-footer{border-top:1px solid var(--line);margin-top:40px}
.site-footer .container{padding:20px 0}

/* VISIBILITY */
.route{display:none}.route.show{display:block}
.auth-only{display:none}
.guest-only{display:inline-block}

/* Mobile */
@media (max-width: 980px){
  .nav{display:none;position:absolute;top:60px;right:4%;flex-direction:column;background:#fff;border:1px solid var(--line);padding:10px;border-radius:14px}
  .nav.open{display:flex}
  .nav-toggle{display:block}
  .hero-wrap{grid-template-columns:1fr}
  .steps{grid-template-columns:repeat(2,1fr)}
  .grid, .testis{grid-template-columns:1fr 1fr}
}
@media (max-width: 580px){
  .steps{grid-template-columns:1fr}
  .grid, .testis{grid-template-columns:1fr}
}
  #newOrderBtn {
  position: fixed;
  bottom: 80px;      /* distanÈ›Äƒ de jos */
  right: 24px;       /* distanÈ›Äƒ de dreapta */
  border-radius: 50px;
  padding: 14px 20px;
  background: var(--verde);
  color: #fff;
  font-size: 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,.2);
  z-index: 999;
}
  body {
  font-size: 16px;
  line-height: 1.5;
}
.stack-md {
  gap: 24px;
}
  /* ---- Reset & Font ---- */
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  font-size:16px;
  line-height:1.5;
  color:#1a2320;
  background:#fff;
}

/* ---- Layout general ---- */
.container{width:min(1100px,92%);margin:auto}
.stack-md{display:grid;grid-template-columns:260px 1fr;gap:24px}
@media (max-width:900px){.stack-md{grid-template-columns:1fr}}

/* ---- Meniu lateral ---- */
.side-nav button{
  display:block;
  width:100%;
  padding:14px 16px;
  font-size:16px;
  border:1px solid #e6ede9;
  border-radius:14px;
  background:#fff;
  text-align:left;
  margin-bottom:8px;
  cursor:pointer;
  transition:.2s;
}
.side-nav button.active{
  background:#0e5a43;
  color:#fff;
  border-color:#0e5a43;
}

/* ---- Panouri ---- */
.card{
  background:#fff;
  border:1px solid #e6ede9;
  border-radius:22px;
  padding:20px;
  box-shadow:0 14px 35px rgba(0,0,0,.06);
  margin-bottom:18px;
}

/* ---- Lista comenzi ---- */
#ordersList .item{
  border-radius:20px;
  box-shadow:0 8px 24px rgba(0,0,0,.04);
  padding:18px;
  margin-bottom:16px;
  display:flex;
  flex-direction:column;
  gap:6px;
}

/* Status badge */
.badge{
  display:inline-block;
  background:#0e5a43;
  color:#fff;
  padding:6px 14px;
  border-radius:30px;
  font-weight:600;
  font-size:14px;
  width:max-content;
}

/* ---- Buton â€+ Cerere nouÄƒâ€ flotant ---- */
#newOrderBtn{
  position:fixed;
  bottom:80px;
  right:24px;
  background:#0e5a43;
  color:#fff;
  font-size:16px;
  padding:16px 22px;
  border:none;
  border-radius:40px;
  box-shadow:0 12px 28px rgba(0,0,0,.2);
  cursor:pointer;
  z-index:999;
  transition:background .2s ease;
}
#newOrderBtn:hover{background:#0a4a35}

/* ---- Chat ---- */
.chat-messages{
  height:260px;
  overflow:auto;
  border:1px solid #e6ede9;
  border-radius:20px;
  padding:14px;
}
.chat-bubble{
  padding:12px;
  border-radius:16px;
  background:#f4f8f6;
  margin-bottom:8px;
}

/* ---- Profile / Footer ---- */
.profile-card strong{font-size:18px}
.site-footer{
  border-top:1px solid #e6ede9;
  padding:20px 0;
  text-align:center;
  color:#5c6b66;
  font-size:14px;
}
</style>
</head>
<body>
<header class="site-header">
  <div class="container">
    <div class="brand">
      <div class="logo">BP</div>
      <div class="brand-text">
        <h1>BucÄƒtarul Personal</h1>
        <p>Chef la tine acasÄƒ Â· Evenimente Â· Meniuri zilnice</p>
      </div>
    </div>
    <button class="nav-toggle" id="navToggle" aria-label="Meniu">&#9776;</button>
    <nav class="nav" id="nav">
      <a href="#" data-route="landing" class="active">AcasÄƒ</a>
      <a href="#" data-route="dashboard" class="auth-only">Dashboard</a>
      <a href="#" data-route="profile" class="auth-only">Profil</a>
      <a href="#" data-route="auth" class="guest-only button">Autentificare</a>
      <button id="logoutBtn" class="auth-only button ghost">IeÈ™ire</button>
    </nav>
  </div>
</header>

<main id="app">
  <!-- HERO -->
  <section class="hero route show" id="route-landing">
    <div class="container hero-wrap">
      <div>
        <h2>Chef profesionist,<br>cÃ¢nd ai nevoie</h2>
        <p>Alege un meniu personalizat, discutÄƒ cu bucÄƒtarul pe chat È™i bucurÄƒ-te de o experienÈ›Äƒ gourmet acasÄƒ sau la birou.</p>
        <div class="cta">
          <a class="button" data-route="auth" href="#">Ãncepe acum</a>
          <a class="button ghost" data-route="dashboard" href="#">Vezi dashboard</a>
        </div>

        <<div class="steps">
  <div class="step">
    <div class="icon">ğŸ‘¨â€ğŸ³</div>
    <strong>Selectezi bucÄƒtarul</strong>
    <span>profil, oraÈ™, stil culinar</span>
  </div>
  <div class="step">
    <div class="icon">ğŸ’¬</div>
    <strong>StabileÈ™ti meniul</strong>
    <span>chat rapid & preferinÈ›e</span>
  </div>
  <div class="step">
    <div class="icon">ğŸ›’</div>
    <strong>CumpÄƒrÄƒturi incluse</strong>
    <span>ingredientele potrivite</span>
  </div>
  <div class="step">
    <div class="icon">ğŸ½ï¸</div>
    <strong>Servire & curÄƒÈ›enie</strong>
    <span>totul impecabil</span>
  </div>
</div>
        </div>
      </div>

      <div class="card">
        <h3>ComandÄƒ rapidÄƒ</h3>
        <form id="quickOrderForm" class="form">
          <label>Nume <input required name="nume" placeholder="Nume Prenume"></label>
          <label>Email <input required type="email" name="email" placeholder="email@exemplu.com"></label>
          <label>OraÈ™ <input name="oras" placeholder="Milano / Roma"></label>
          <label>Tip eveniment
            <select name="tip">
              <option>CinÄƒ privatÄƒ</option>
              <option>Eveniment corporate</option>
              <option>Meniuri zilnice</option>
            </select>
          </label>
          <label>Data <input type="date" name="data"></label>
          <button class="button" type="submit">Trimite cererea</button>
          <p class="muted" style="font-size:12px;margin:6px 0 0">*Demo â€” datele se salveazÄƒ local.</p>
        </form>
      </div>
    </div>

    <!-- GALLERY -->
    <div class="container section">
      <h3>InspiraÈ›ie culinarÄƒ</h3>
      <p class="lead">Plating artistic, ingrediente de sezon È™i idei pentru urmÄƒtoarea cinÄƒ.</p>
      <div class="gallery">
        <div class="scroller">
          <figure class="snap"><img src="https://images.unsplash.com/photo-1544025162-d76694265947?auto=format&fit=crop&w=1400&q=70" alt=""><figcaption class="cap">TartÄƒ cu fructe</figcaption></figure>
          <figure class="snap"><img src="https://images.unsplash.com/photo-1543352634-8730a9b86571?auto=format&fit=crop&w=1400&q=70" alt=""><figcaption class="cap">File de vitÄƒ & sos demi-glace</figcaption></figure>
          <figure class="snap"><img src="https://images.unsplash.com/photo-1476127396924-2aa7d3b74d04?auto=format&fit=crop&w=1400&q=70" alt=""><figcaption class="cap">Pasta artigianale</figcaption></figure>
          <figure class="snap"><img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=1400&q=70" alt=""><figcaption class="cap">Bufet corporate</figcaption></figure>
        </div>
      </div>
    </div>

    <!-- CHEFS -->
    <div class="container section">
      <h3>BucÄƒtarii noÈ™tri</h3>
      <p class="lead">SelectaÈ›i pe criterii de experienÈ›Äƒ, plating È™i feedback clienÈ›i.</p>
      <div class="grid">
        <article class="card chef">
          <div class="pic"><img src="https://images.unsplash.com/photo-1549029335-5a6cbf0f6d49?auto=format&fit=crop&w=1200&q=60" alt=""></div>
          <div class="meta">
            <strong>Chef Andrei P.</strong>
            <div class="city">Milano Â· ItalianÄƒ modernÄƒ</div>
            <div class="stars">â˜…â˜…â˜…â˜…â˜…</div>
          </div>
        </article>
        <article class="card chef">
          <div class="pic"><img src="https://images.unsplash.com/photo-1542843137-8791a6904d14?auto=format&fit=crop&w=1200&q=60" alt=""></div>
          <div class="meta">
            <strong>Chef Bianca R.</strong>
            <div class="city">Roma Â· Fine dining</div>
            <div class="stars">â˜…â˜…â˜…â˜…â˜…</div>
          </div>
        </article>
        <article class="card chef">
          <div class="pic"><img src="https://images.unsplash.com/photo-1524041255072-7da0525d6b34?auto=format&fit=crop&w=1200&q=60" alt=""></div>
          <div class="meta">
            <strong>Chef Marco L.</strong>
            <div class="city">Firenze Â· TradiÈ›ional & grill</div>
            <div class="stars">â˜…â˜…â˜…â˜…â˜†</div>
          </div>
        </article>
      </div>
    </div>

    <!-- TESTIMONIALS -->
    <div class="container section">
      <h3>Ce spun clienÈ›ii</h3>
      <div class="testis">
        <div class="quote">
          <div class="stars">â˜…â˜…â˜…â˜…â˜…</div>
          â€Cina de aniversare a fost impecabilÄƒ. Plating artistic È™i gusturi memorabile!â€
          <div class="muted" style="margin-top:6px">â€” Ioana, Milano</div>
        </div>
        <div class="quote">
          <div class="stars">â˜…â˜…â˜…â˜…â˜…</div>
          â€Perfect pentru evenimentul nostru corporate. Totul la timp, curat È™i delicios.â€
          <div class="muted" style="margin-top:6px">â€” Luca, Roma</div>
        </div>
        <div class="quote">
          <div class="stars">â˜…â˜…â˜…â˜…â˜†</div>
          â€Meniu de sezon reuÈ™it. Recomand pentru cine private la domiciliu.â€
          <div class="muted" style="margin-top:6px">â€” Martina, Firenze</div>
        </div>
      </div>
    </div>

    <!-- CTA -->
    <div class="container section" style="padding-top:0">
      <div class="card" style="display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center">
        <div>
          <strong style="font:800 22px/1.1 Playfair Display,serif">Vrei un chef la tine acasÄƒ?</strong>
          <div class="muted">CompleteazÄƒ cererea È™i Ã®È›i rÄƒspundem rapid.</div>
        </div>
        <a class="button" data-route="auth" href="#">CreeazÄƒ cont</a>
      </div>
    </div>
  </section>

  <!-- AUTH -->
  <section class="route" id="route-auth">
    <div class="container" style="padding:26px 0">
      <div class="card" style="max-width:680px;margin:auto">
        <h3>Autentificare / Ãnregistrare</h3>
        <div class="tabs" style="display:flex;gap:8px;margin:8px 0 10px">
          <button class="tab button ghost" data-tab="login">Login</button>
          <button class="tab button ghost" data-tab="signup">CreeazÄƒ cont</button>
        </div>
        <div class="tabpanel" id="tab-login">
          <form id="loginForm" class="form">
            <label>Email <input type="email" name="email" required></label>
            <label>ParolÄƒ <input type="password" name="password" required></label>
            <button class="button" type="submit">Autentificare</button>
          </form>
        </div>
        <div class="tabpanel" id="tab-signup" style="display:none">
          <form id="signupForm" class="form">
            <label>Nume <input type="text" name="name" required></label>
            <label>Email <input type="email" name="email" required></label>
            <label>ParolÄƒ <input type="password" name="password" required></label>
            <label>Rol
              <select name="role" required>
                <option value="client">Client</option>
                <option value="chef">BucÄƒtar</option>
              </select>
            </label>
            <button class="button" type="submit">CreeazÄƒ cont</button>
          </form>
        </div>
        <p class="muted" style="font-size:12px">Demo: Ã®n acest prototip datele sunt stocate local (LocalStorage).</p>
      </div>
    </div>
  </section>

  <!-- DASHBOARD -->
  <section class="route" id="route-dashboard">
    <div class="container" style="padding:26px 0">
      <div class="stack-md">
        <aside class="card">
          <h3 style="margin:0 0 8px">Panou</h3>
          <nav class="side-nav" id="sideNav">
            <button data-panel="orders" class="active">Comenzi</button>
            <button data-panel="chat">Chat</button>
            <button data-panel="calendar">Calendar</button>
            <button data-panel="menus">Meniurile mele</button>
            <button data-panel="settings">SetÄƒri</button>
          </nav>
          <div class="badge" id="roleBadge">Rol: -</div>
        </aside>

        <section class="card">
          <!-- Orders -->
          <div class="panel show" id="panel-orders">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
              <h3 style="margin:0">Comenzi</h3>
              <button id="newOrderBtn" class="button sm">+ Cerere nouÄƒ</button>
            </div>
            <div id="ordersList" class="list"></div>
          </div>

          <!-- Chat -->
          <div class="panel" id="panel-chat">
            <h3>Chat</h3>
            <div class="chat">
              <div id="chatMessages" class="chat-messages"></div>
              <form id="chatForm" class="chat-form" style="display:flex;gap:8px">
                <input id="chatInput" placeholder="Scrie un mesaj...">
                <button class="button sm" type="submit">Trimite</button>
              </form>
            </div>
          </div>

          <!-- Calendar -->
          <div class="panel" id="panel-calendar">
            <h3>Calendar</h3>
            <form id="eventForm" class="row" style="display:flex;gap:8px;flex-wrap:wrap">
              <input type="date" id="eventDate" required>
              <input type="time" id="eventTime" required>
              <input type="text" id="eventTitle" placeholder="Titlu" required>
              <button class="button sm" type="submit">AdaugÄƒ</button>
            </form>
            <ul id="eventsList" class="list" style="margin-top:10px"></ul>
          </div>

          <!-- Menus -->
          <div class="panel" id="panel-menus">
            <h3>Meniurile mele</h3>
            <form id="menuForm" style="display:flex;gap:8px;flex-wrap:wrap">
              <input type="text" id="menuTitle" placeholder="Ex: CinÄƒ de toamnÄƒ" required>
              <input type="number" id="menuPrice" placeholder="PreÈ› (RON)" required>
              <button class="button sm" type="submit">SalveazÄƒ</button>
            </form>
            <div id="menusList" class="grid" style="margin-top:12px"></div>
          </div>

          <!-- Settings -->
          <div class="panel" id="panel-settings">
            <h3>SetÄƒri</h3>
            <form id="profileForm" class="grid" style="grid-template-columns:repeat(2,1fr);gap:10px">
              <label>Nume <input id="profileName" required></label>
              <label>OraÈ™ <input id="profileCity" placeholder="Milano, Roma"></label>
              <label>Telefon <input id="profilePhone" placeholder="+39 ..."></label>
              <label>Rol
                <select id="profileRole">
                  <option value="client">Client</option>
                  <option value="chef">BucÄƒtar</option>
                </select>
              </label>
              <div style="grid-column:1/-1"><button class="button" type="submit">ActualizeazÄƒ profil</button></div>
            </form>
          </div>
        </section>
      </div>
    </div>
  </section>

  <!-- PROFILE -->
  <section class="route" id="route-profile">
    <div class="container" style="padding:26px 0">
      <div class="card">
        <h3>Profil</h3>
        <div id="profileCard" class="profile-card"></div>
      </div>
    </div>
  </section>
</main>

<footer class="site-footer">
  <div class="container">
    <p class="muted">Â© <span id="year"></span> BucÄƒtarul Personal Â· Termeni Â· ConfidenÈ›ialitate</p>
  </div>
</footer>

<script>
const $=(s,c=document)=>c.querySelector(s), $$=(s,c=document)=>[...c.querySelectorAll(s)];
const routes={landing:'#route-landing',auth:'#route-auth',dashboard:'#route-dashboard',profile:'#route-profile'};
const panels={orders:'#panel-orders',chat:'#panel-chat',calendar:'#panel-calendar',menus:'#panel-menus',settings:'#panel-settings'};
const state={
  user: JSON.parse(localStorage.getItem('bp_user')||'null'),
  orders: JSON.parse(localStorage.getItem('bp_orders')||'[]'),
  messages: JSON.parse(localStorage.getItem('bp_chat')||'[]'),
  events: JSON.parse(localStorage.getItem('bp_events')||'[]'),
  menus: JSON.parse(localStorage.getItem('bp_menus')||'[]')
};

function navigate(route){
  Object.values(routes).forEach(id => $(id).classList.remove('show'));
  $(routes[route]).classList.add('show');
  $$('#nav a').forEach(a=>a.classList.toggle('active', a.dataset.route===route));
  if(route==='dashboard') renderDashboard();
  if(route==='profile') renderProfile();
  prefillProfile();
}
$$('#nav a').forEach(a=>a.addEventListener('click', e=>{e.preventDefault();navigate(a.dataset.route);}));
$('#navToggle').addEventListener('click', ()=> $('#nav').classList.toggle('open'));
$$('[data-route]').forEach(el=>el.addEventListener('click', e=>{ if(el.tagName==='A'){e.preventDefault();} navigate(el.dataset.route); }));

function updateAuthUI(){
  const isAuth = !!state.user;
  $$('.auth-only').forEach(el=> el.style.display = isAuth ? 'inline-block':'none');
  $$('.guest-only').forEach(el=> el.style.display = isAuth ? 'none':'inline-block');
  $('#logoutBtn').style.display = isAuth ? 'inline-block':'none';
}
$('#logoutBtn').addEventListener('click', ()=>{ state.user=null; localStorage.removeItem('bp_user'); updateAuthUI(); navigate('landing');});

// quick order
$('#quickOrderForm').addEventListener('submit', e=>{
  e.preventDefault();
  const fd = new FormData(e.target);
  const order = Object.fromEntries(fd.entries());
  order.id = 'ord_'+Date.now(); order.status='nou';
  state.orders.unshift(order);
  localStorage.setItem('bp_orders', JSON.stringify(state.orders));
  e.target.reset(); alert('Cerere trimisÄƒ! (demo)');
});

// auth tabs
const tabLogin = $('#tab-login'), tabSignup = $('#tab-signup');
$$('.tab').forEach(btn=>btn.addEventListener('click', ()=>{
  $$('.tab').forEach(x=>x.classList.remove('active')); btn.classList.add('active');
  if(btn.dataset.tab==='login'){ tabLogin.style.display='block'; tabSignup.style.display='none'; }
  else { tabLogin.style.display='none'; tabSignup.style.display='block'; }
}));

// login / signup (LocalStorage demo)
$('#loginForm').addEventListener('submit', e=>{
  e.preventDefault();
  const {email, password} = Object.fromEntries(new FormData(e.target).entries());
  const users = JSON.parse(localStorage.getItem('bp_users')||'[]');
  const user = users.find(u=>u.email===email && u.password===password);
  if(!user){ alert('Date invalide.'); return; }
  state.user = user; localStorage.setItem('bp_user', JSON.stringify(user));
  updateAuthUI(); navigate('dashboard');
});
$('#signupForm').addEventListener('submit', e=>{
  e.preventDefault();
  const data = Object.fromEntries(new FormData(e.target).entries());
  const users = JSON.parse(localStorage.getItem('bp_users')||'[]');
  if(users.some(u=>u.email===data.email)){ alert('Email existent.'); return; }
  const newUser = { id:'u_'+Date.now(), name:data.name, email:data.email, password:data.password, role:data.role, city:'', phone:'' };
  users.push(newUser); localStorage.setItem('bp_users', JSON.stringify(users));
  state.user = newUser; localStorage.setItem('bp_user', JSON.stringify(newUser));
  updateAuthUI(); navigate('dashboard');
});

// dashboard
function renderDashboard(){
  $('#roleBadge').textContent = 'Rol: ' + (state.user?.role || '-');

  // orders
  const list = $('#ordersList'); list.innerHTML='';
  const visibleOrders = (state.user?.role==='chef') ? state.orders : state.orders.filter(o=>o.email===state.user?.email || !state.user);
  if(visibleOrders.length===0){ list.innerHTML = '<p class="muted">Nu existÄƒ comenzi.</p>'; }
  visibleOrders.forEach(o=>{
    const el = document.createElement('div'); el.className='item';
    el.innerHTML = `
      <div><strong>${o.tip||'ComandÄƒ'}</strong> Â· <span class="muted">${o.oras||'-'} Â· ${o.data||''}</span></div>
      <div>${o.nume||'-'} â€” ${o.email||''}</div>
      <div class="badge">${o.status}</div>`;
    list.appendChild(el);
  });

  // chat
  renderChat();

  // events
  const evList = $('#eventsList'); evList.innerHTML='';
  state.events.forEach(ev=>{
    const li = document.createElement('li'); li.className='item';
    li.innerHTML = `<strong>${ev.title}</strong> â€” ${ev.date} ${ev.time}`;
    evList.appendChild(li);
  });

  // menus
  const ml = $('#menusList'); ml.innerHTML='';
  state.menus.forEach(m=>{
    const card = document.createElement('div'); card.className='card';
    card.innerHTML = `<strong>${m.title}</strong><div class="muted">PreÈ›: ${m.price} RON</div>`;
    ml.appendChild(card);
  });
}

$('#newOrderBtn').addEventListener('click', ()=>{
  const o = { id:'ord_'+Date.now(), tip:'Cerere personalizatÄƒ', nume:state.user?.name||'Client', email:state.user?.email||'', oras:state.user?.city||'', data:'', status:'nou' };
  state.orders.unshift(o); localStorage.setItem('bp_orders', JSON.stringify(state.orders)); renderDashboard();
});

// chat
$('#chatForm').addEventListener('submit', e=>{
  e.preventDefault();
  const text = $('#chatInput').value.trim(); if(!text) return;
  const msg = { id:'m_'+Date.now(), from: state.user?.email||'anon', text, at:new Date().toISOString() };
  state.messages.push(msg); localStorage.setItem('bp_chat', JSON.stringify(state.messages));
  $('#chatInput').value=''; renderChat();
});
function renderChat(){
  const box = $('#chatMessages'); box.innerHTML='';
  state.messages.slice(-50).forEach(m=>{
    const div = document.createElement('div'); div.className='chat-bubble';
    const time = new Date(m.at).toLocaleString();
    div.innerHTML = `<strong>${m.from}</strong> <span class="muted">${time}</span><br>${m.text}`;
    box.appendChild(div);
  });
  box.scrollTop = box.scrollHeight;
}

// events
$('#eventForm').addEventListener('submit', e=>{
  e.preventDefault();
  const date = $('#eventDate').value, time = $('#eventTime').value, title = $('#eventTitle').value;
  state.events.push({id:'e_'+Date.now(), date, time, title});
  localStorage.setItem('bp_events', JSON.stringify(state.events));
  e.target.reset(); renderDashboard();
});

// menus
$('#menuForm').addEventListener('submit', e=>{
  e.preventDefault();
  const title = $('#menuTitle').value, price = Number($('#menuPrice').value||0);
  state.menus.push({id:'menu_'+Date.now(), title, price});
  localStorage.setItem('bp_menus', JSON.stringify(state.menus));
  e.target.reset(); renderDashboard();
});

// profile
function renderProfile(){
  const wrap = $('#profileCard'); wrap.innerHTML='';
  if(!state.user){ wrap.innerHTML='<p class="muted">Neautentificat.</p>'; return;}
  wrap.innerHTML = `
    <div><strong>${state.user.name||'-'}</strong></div>
    <div>${state.user.email}</div>
    <div class="muted">${state.user.city||''} ${state.user.phone?('Â· '+state.user.phone):''}</div>
    <div class="badge">Rol: ${state.user.role}</div>`;
}
function prefillProfile(){
  if(!state.user) return;
  $('#profileName').value = state.user.name||'';
  $('#profileCity').value = state.user.city||'';
  $('#profilePhone').value = state.user.phone||'';
  $('#profileRole').value = state.user.role||'client';
}
$('#profileForm').addEventListener('submit', e=>{
  e.preventDefault();
  if(!state.user) return;
  state.user.name = $('#profileName').value;
  state.user.city = $('#profileCity').value;
  state.user.phone = $('#profilePhone').value;
  state.user.role = $('#profileRole').value;
  localStorage.setItem('bp_user', JSON.stringify(state.user));
  updateAuthUI(); renderProfile();
  $('#roleBadge').textContent = 'Rol: ' + state.user.role;
  alert('Profil actualizat (demo).');
});

// init
document.getElementById('year').textContent = new Date().getFullYear();
updateAuthUI();
navigate(state.user ? 'dashboard' : 'landing');
</script>
</body>
</html>
